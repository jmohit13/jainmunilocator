// Google Maps Background, Markers, and Infowindow
var map = new google.maps.Map(document.getElementById('map-canvas'), {
	zoom: 5,
	center: new google.maps.LatLng(23.2836,79.2318),
	mapTypeId: google.maps.MapTypeId.ROADMAP
	});
var infowindow = new google.maps.InfoWindow();
var marker, i;

for (i = 0; i < locations.length; i++) {
	marker = new google.maps.Marker({
		position: new google.maps.LatLng(locations[i][1], locations[i][2]),
		map: map
	});
	
	google.maps.event.addListener(marker, 'click', (function(marker, i) {
		return function() {
			infowindow.setContent(locations[i][0]);
			infowindow.open(map, marker);
		}
	})(marker, i));
}

// Slider Menu code
$(function(){
  var menuwidth  = 240; // pixel value for sliding menu width
  var menuspeed  = 400; // milliseconds for sliding menu animation time
  
  var $bdy       = $('body');
  var $container = $('#pgcontainer');
  var $burger    = $('#menu');
  var negwidth   = "-"+menuwidth+"px";
  var poswidth   = menuwidth+"px";
  
  $('.menubtn').on('click',function(e){
    if($bdy.hasClass('openmenu')) {
      jsAnimateMenu('close');
    } else {
      jsAnimateMenu('open');
    }
  });
  
  $('.overlay').on('click', function(e){
    if($bdy.hasClass('openmenu')) {
      jsAnimateMenu('close');
    }
  });
  
  $('a[href$="#"]').on('click', function(e){
    e.preventDefault();
  });
  
  function jsAnimateMenu(tog) {
    if(tog == 'open') {
      $bdy.addClass('openmenu');
      
      $container.animate({marginRight: negwidth, marginLeft: poswidth}, menuspeed);
      $burger.animate({width: poswidth}, menuspeed);
      $('.overlay').animate({left: poswidth}, menuspeed);
    }
    
    if(tog == 'close') {
      $bdy.removeClass('openmenu');
      
      $container.animate({marginRight: "0", marginLeft: "0"}, menuspeed);
      $burger.animate({width: "0"}, menuspeed);
      $('.overlay').animate({left: "0"}, menuspeed);
    }
  }
});

// Guru Name Autocomplete Code
var delay = (function(){
  var timer = 0;
  return function(callback, ms){
  clearTimeout (timer);
  timer = setTimeout(callback, ms);
 };
})();

$(document).ready(function(){
	var listOption = null;
	$('#aguru').change(function()
					  {
						  var index = 0;
						  var val = $('#aguru').val();
						  for(var i = 0; listOption && i < listOption.length; i++) {
							  if(listOption[i].name === val) {
								  $("#aguruHidden").val(listOption[i].id);
								  break;
							  }
						  }
					  });
	$('#aguru').keyup(function()
					  {delay(function(){
						  $.ajax({url: "http://jainmunilocator.org/getGuruOptions.php?guruNameInput=" + $('#aguru').val(), success: function(result)
								  	{
									  if(result && result.length)
									  {
											//console.log(result);
											listOption = JSON.parse(result);
											var str = "";
											for(var i = 0 ; listOption && i < listOption.length; i++) {
												str += '<option value="'+ listOption[i].name +'" />'; // Storing options in variable
											}
											$("#aguruList").html(str);
									   }
						  			}
							 },2000);
					  		});
						  
						});
					});
